flowchart LR
    subgraph clients["Clients"]
        A1["AI Agent"]
        A2["Web App"]
        A3["CLI Tool"]
        A4["Any OpenAI SDK Client"]
    end

    subgraph gateway["lm-gateway-rs"]
        direction TB
        GW["POST /v1/chat/completions\n:8080"]
        RT{{"Routing Engine\ndispatch 路 escalate"}}
        GW --> RT
    end

    subgraph backends["Backends"]
        B1["Ollama\nlocal 路 free"]
        B2["OpenRouter\ncloud 路 economy"]
        B3["Anthropic\ncloud 路 expert"]
        B4["Any OpenAI-compat API"]
    end

    A1 -->|"model: hint:fast"| GW
    A2 -->|"model: hint:cloud"| GW
    A3 -->|"model: hint:expert"| GW
    A4 -->|"any alias or tier"| GW

    RT -->|"local:fast / local:capable"| B1
    RT -->|"cloud:economy / cloud:standard"| B2
    RT -->|"cloud:expert"| B3
    RT --> B4
